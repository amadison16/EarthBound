<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>EarthBound Co. | Get Involved</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<header>
    <h1>EarthBound Co.</h1>
    <h2>Sustaining Tomorrow Starts Today</h2>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About</a></li>
            <li><a href="projects.html">Projects</a></li>
            <li><a href="getinvolved.html" class="active">Get Involved</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>
</header>

<main>
  <div class="get-involved-bg">
    <section>
        <h3>Join the Mission</h3>
        <p>Want to help protect the environment and promote sustainability? There are many ways to get involved!</p>
    </section>

    <section>
        <h3>Ways You Can Help</h3>
        <ul>
            <li>Volunteer at a tree-planting event</li>
            <li>Donate supplies for conservation efforts</li>
            <li>Share our mission on social media</li>
        </ul>
    </section>

    <section class="donate-section">
        <h3>Support Our Cause</h3>
        <p>Your donation helps fund tree-planting, education, and conservation projects.</p>

        <!-- BUTTON THAT OPENS MODAL -->
        <a class="donate-btn" href="#" id="openDonate">
            Donate Now
        </a>

        <!-- PAYMENT MODAL -->
        <div id="paymentModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>

            <h3>Mock Payment</h3>
            <p>This is a demo payment window. No real charges will occur.</p>

            <!-- FORM -->
            <form id="paymentForm">
                <label>Cardholder Name</label>
                <input type="text" id="cardName" required>

                <label>Card Number</label>
                <input type="text" id="cardNumber" maxlength="19" placeholder="1234 5678 9012 3456" required>

                <div class="payment-row">
                    <div>
                        <label>Exp</label>
                        <input type="text" id="expDate" maxlength="5" placeholder="MM/YY" required>
                    </div>
                    <div>
                        <label>CVV</label>
                        <input type="text" id="cvv" maxlength="3" required>
                    </div>
                </div>

                <button class="donate-btn" type="submit">Submit Payment</button>
            </form>

          </div>
        </div>
    </section>

    <section>
    <h3>Sign Up!</h3>
    <p>Fill out our form to stay updated on upcoming opportunities:</p>

    <form id="joinForm">
        <label>Name:</label><br>
        <input type="text" id="joinName" required><br><br>

        <label>Email:</label><br>
        <input type="email" id="joinEmail" required><br><br>

        <button type="submit">Join Us</button>
    </form>

    <p id="thankMessage" style="display:none; color: green; margin-top: 1em;">
        Thank you for joining! Weâ€™ll keep you updated.
    </p>
</section>


  </div>
</main>

<footer>
    <p>&copy; 2025 EarthBound Co.</p>
</footer>
<script>
//MODAL OPEN/CLOSE
const modal = document.getElementById("paymentModal");
const openBtn = document.getElementById("openDonate");
const closeBtn = document.querySelector(".close");

openBtn.addEventListener("click", function(event) {
    event.preventDefault();
    modal.style.display = "block";
});

closeBtn.onclick = function() {
    modal.style.display = "none";
};

function closeModal() {
    modal.style.display = "none";
}

window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
};

// AUTO-FORMATTING 

// Card number formatting
document.getElementById("cardNumber").addEventListener("input", function () {
    let v = this.value.replace(/\D/g, "").substring(0, 16);
    this.value = v.replace(/(.{4})/g, "$1 ").trim();
});

// Expiration formatting
document.getElementById("expDate").addEventListener("input", function () {
    let v = this.value.replace(/\D/g, "").substring(0, 4);
    this.value = v.length > 2 ? v.substring(0,2) + "/" + v.substring(2) : v;
});

//LUHN CHECK 
function luhnCheck(num) {
    let arr = num.split("").reverse().map(x => parseInt(x));
    let sum = 0;
    for (let i = 0; i < arr.length; i++) {
        let n = arr[i];
        if (i % 2 !== 0) n *= 2;
        if (n > 9) n -= 9;
        sum += n;
    }
    return sum % 10 === 0;
}

// VALIDATION 
document.getElementById("paymentForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const cardName = document.getElementById("cardName").value.trim();
    const number = document.getElementById("cardNumber").value.replace(/\D/g, "");
    const expRaw = document.getElementById("expDate").value;
    const exp = expRaw.replace("/", "");
    const cvv = document.getElementById("cvv").value;

    if (cardName.length < 2) {
        alert("Please enter the cardholder's full name.");
        return;
    }

    if (!/^\d{16}$/.test(number)) {
        alert("Card number must be exactly 16 digits.");
        return;
    }

    if (!luhnCheck(number)) {
        alert("Invalid card number.");
        return;
    }

    if (!/^\d{4}$/.test(exp)) {
        alert("Expiration must be 4 digits (MMYY).");
        return;
    }

    const month = parseInt(exp.substring(0, 2));
    if (month < 1 || month > 12) {
        alert("Invalid expiration month.");
        return;
    }

    if (!/^\d{3}$/.test(cvv)) {
        alert("CVV must be exactly 3 digits.");
        return;
    }

    alert("Mock payment submitted successfully!");
    closeModal();
});

// Join Us form submission 
const joinForm = document.getElementById("joinForm");
const joinName = document.getElementById("joinName");
const joinEmail = document.getElementById("joinEmail");
const thankMessage = document.getElementById("thankMessage");

joinForm.addEventListener("submit", function(e) {
    e.preventDefault(); // prevent page reload

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (joinName.value.trim().length < 2) {
        alert("Please enter your name.");
        return;
    }

    if (!emailPattern.test(joinEmail.value.trim())) {
        alert("Please enter a valid email address.");
        return;
    }

    // If everything is valid
    joinForm.style.display = "none"; // hide the form
    thankMessage.style.display = "block"; // show thank-you message
});

</script>

</body>
</html>

